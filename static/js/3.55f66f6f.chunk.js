(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[3],{251:function(e,t,o){e.exports={postsBlock:"MyPosts_postsBlock__3BStp",posts:"MyPosts_posts__2Eaxb"}},252:function(e,t,o){e.exports={item:"Post_item__1myGU"}},253:function(e,t,o){e.exports={avatar:"ProfileInfo_avatar__1Tzcz"}},255:function(e,t,o){"use strict";o.r(t);var s=o(3),n=o(5),r=o(6),a=o(11),i=o(12),c=o(0),u=o.n(c),l=o(23),d=o(74),p=o(73),j=o(58),b=o(251),h=o.n(b),f=o(252),O=o.n(f),v=o(1),g=function(e){return Object(v.jsxs)("div",{className:O.a.item,children:[Object(v.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:""}),e.message,Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{children:"like"})," ",e.likesCount]})]})},x=function(e){var t=Object(p.a)({initialValues:{post:""},onSubmit:function(t,o){var s=o.resetForm;e.addNewPost(t),s()}});return Object(v.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(v.jsx)(j.c,{name:"post",onBlur:t.handleBlur,onChange:t.handleChange,value:t.values.post,placeholder:"Enter your post"}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{disabled:!t.dirty,type:"submit",children:"Add post"})})]})},m=function(e){var t=e.posts.map((function(e,t){return Object(v.jsx)(g,{message:e.message,likesCount:e.likesCount},t)}));return Object(v.jsxs)("div",{className:h.a.postsBlock,children:[Object(v.jsx)("h3",{children:"My posts"}),Object(v.jsx)("div",{children:Object(v.jsx)(x,{addNewPost:function(t){e.addPost(t.post)}})}),Object(v.jsx)("div",{className:h.a.posts,children:t})]})},k=Object(l.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),{addPost:d.a})(m),P=o(29),w=o(42),C=o(2),y=o.n(C),S=o(4),A=function(e){var t=e.contacts,o=e.onChange,s=e.errors.map((function(e){return e.split("->")[1].replace(")","").toLowerCase()}));return Object(v.jsx)("div",{children:Object.keys(t).map((function(e){return Object(v.jsx)(j.b,{title:e,isError:s.some((function(t){return t===e.toLowerCase()})),name:"contacts.".concat(e),onChange:o,value:t["".concat(e)],placeholder:e},e)}))})},F=function(e){var t=e.profile,o=e.closeEditMode,n=e.updateProfile,r=e.authorizedUserId,a=e.errors,i=function(e){return e||""},c=Object(p.a)({initialValues:{fullName:t.fullName,aboutMe:i(t.aboutMe),lookingForAJob:t.lookingForAJob,lookingForAJobDescription:i(t.lookingForAJobDescription),contacts:{facebook:i(t.contacts.facebook),github:i(t.contacts.github),instagram:i(t.contacts.instagram),mainLink:i(t.contacts.mainLink),twitter:i(t.contacts.twitter),vk:i(t.contacts.vk),website:i(t.contacts.website),youtube:i(t.contacts.youtube)}},onSubmit:function(){var e=Object(S.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(Object(s.a)(Object(s.a)({},t),{},{userId:r}));case 2:o();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return Object(v.jsxs)("form",{onSubmit:c.handleSubmit,children:[Object(v.jsx)(j.a,{title:"\u0418\u043c\u044f",name:"fullName",onChange:c.handleChange,value:c.values.fullName,placeholder:"fullName"}),Object(v.jsx)(j.a,{title:"\u041e\u0431\u043e \u043c\u043d\u0435",name:"aboutMe",onChange:c.handleChange,value:c.values.aboutMe,placeholder:"aboutMe"}),Object(v.jsx)("input",{name:"lookingForAJob",checked:c.values.lookingForAJob,onChange:c.handleChange,type:"checkbox"})," looking For A Job",c.values.lookingForAJob&&Object(v.jsx)(j.a,{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u044b",name:"lookingForAJobDescription",onChange:c.handleChange,value:c.values.lookingForAJobDescription,placeholder:"looking For A Job Description"}),Object(v.jsx)(A,{contacts:c.values.contacts,onChange:c.handleChange,errors:a}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{type:"submit",children:"Send"})}),!!a.length&&a.map((function(e,t){return Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("strong",{children:"\u041e\u0448\u0438\u0431\u043a\u0430: "}),e]},t)}))]})},J=o(253),M=o.n(J),I=function(e){var t=Object(c.useState)(!1),o=Object(P.a)(t,2),s=o[0],n=o[1],r=Object(c.useState)(e.status),a=Object(P.a)(r,2),i=a[0],u=a[1];Object(c.useEffect)((function(){u(e.status)}),[e.status]);return Object(v.jsx)("div",{children:s?Object(v.jsxs)("div",{children:["\u0421\u0442\u0430\u0442\u0443\u0441: ",Object(v.jsx)("input",{onChange:function(e){u(e.target.value)},onBlur:function(){n(!1),e.updateStatus(i)},autoFocus:!0,type:"text",value:i})]}):Object(v.jsx)("div",{children:Object(v.jsxs)("span",{onDoubleClick:function(){e.isOwner&&n(!0)},children:[Object(v.jsx)("strong",{children:"\u0421\u0442\u0430\u0442\u0443\u0441:"})," ",e.status||"\u041d\u0435\u0442 \u0441\u0442\u0430\u0442\u0443\u0441\u0430"]})})})},_=function(e){var t=e.profile,o=e.isOwner,s=e.goToEditMode,n=Object.entries(null===t||void 0===t?void 0:t.contacts).map((function(e,t){return!!e[1]&&Object(v.jsxs)("li",{children:[Object(v.jsxs)("strong",{children:[e[0],": "]}),e[1]]},t)}));return Object(v.jsxs)("form",{children:[o&&Object(v.jsx)("button",{onClick:s,children:"Edit profile"}),Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"\u0418\u043c\u044f:"})," ",null===t||void 0===t?void 0:t.fullName]}),(null===t||void 0===t?void 0:t.aboutMe)&&Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"\u041e\u0431\u043e \u043c\u043d\u0435: "}),null===t||void 0===t?void 0:t.aboutMe]}),(null===t||void 0===t?void 0:t.lookingForAJob)&&Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"\u0412 \u043f\u043e\u0438\u0441\u043a\u0435 \u0440\u0430\u0431\u043e\u0442\u044b: "}),null===t||void 0===t?void 0:t.lookingForAJobDescription]}),Object(v.jsx)("ul",{children:n})]})},N=function(e){var t,o=e.profile,s=e.status,n=e.updateStatus,r=e.isOwner,a=e.savePhoto,i=e.updateProfile,u=e.authorizedUserId,l=e.errors,d=Object(c.useState)(!1),p=Object(P.a)(d,2),j=p[0],b=p[1];Object(c.useEffect)((function(){l.length&&b(!0)}),[l,u]);return o?Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:M.a.avatar,children:[Object(v.jsx)("img",{src:(null===o||void 0===o||null===(t=o.photos)||void 0===t?void 0:t.large)||"https://www.kindpng.com/picc/m/130-1300217_user-icon-member-icon-png-transparent-png.png",alt:"avatar"}),r&&j&&Object(v.jsx)("input",{type:"file",accept:".png, .jpg, .jpeg",onChange:function(e){e.target.files.length&&a(e.target.files[0])}})]}),j?Object(v.jsx)(F,{errors:l,authorizedUserId:u,updateProfile:i,profile:o,closeEditMode:function(){return b(!1)}}):Object(v.jsx)(_,{profile:o,isOwner:r,goToEditMode:function(){return b(!0)}}),Object(v.jsx)(I,{status:s,updateStatus:n,isOwner:r})]}):Object(v.jsx)(w.a,{})},U=function(e){return Object(v.jsxs)("div",{children:[Object(v.jsx)(N,{isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus,savePhoto:e.savePhoto,updateProfile:e.updateProfile,authorizedUserId:e.authorizedUserId,errors:e.errors}),Object(v.jsx)(k,{})]})},E=o(9),z=o(33),D=function(e){Object(a.a)(o,e);var t=Object(i.a)(o);function o(){return Object(n.a)(this,o),t.apply(this,arguments)}return Object(r.a)(o,[{key:"refreshProfile",value:function(){var e,t=null!==(e=this.props.match.params.userId)&&void 0!==e?e:this.props.authorizedUserId;t?(this.props.getUserProfile(t),this.props.getStatus(t)):this.props.history.push("/login")}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(v.jsx)(U,Object(s.a)(Object(s.a)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,updateProfile:this.props.updateProfile}))}}]),o}(u.a.Component);t.default=Object(z.c)(Object(l.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth,errors:e.profilePage.errors}}),{getUserProfile:d.d,getStatus:d.c,updateStatus:d.g,savePhoto:d.e,updateProfile:d.f}),E.h)(D)}}]);
//# sourceMappingURL=3.55f66f6f.chunk.js.map