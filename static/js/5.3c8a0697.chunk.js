(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[5],{392:function(e,t,n){e.exports={postsBlock:"MyPosts_postsBlock__3BStp",posts:"MyPosts_posts__2Eaxb"}},407:function(e,t,n){"use strict";n.r(t);var o=n(110),c=n(142),i=n(392),a=n.n(i),s=n(52),r=n(0),l=n.n(r),u=n(120),j=n(386),d=n(378),b=n(393),h=n.n(b),O=n(411),p=n(412),f=n(413),v=n(414),x=n(26),m=n(109),g=n(6),k=function(e){var t=Object(r.useState)(e.likesCount),n=Object(s.a)(t,2),o=n[0],c=n[1],i=Object(r.useState)(0),a=Object(s.a)(i,2),b=a[0],k=a[1],C=Object(r.useState)(""),w=Object(s.a)(C,2),S=w[0],y=w[1],F=Object(x.d)((function(e){var t,n;return null===(t=e.profilePage.profile)||void 0===t||null===(n=t.photos)||void 0===n?void 0:n.large})),A=Object(x.d)((function(e){var t;return null===(t=e.profilePage.profile)||void 0===t?void 0:t.fullName})),N=[Object(g.jsx)(u.a,{title:"Like",children:Object(g.jsxs)("span",{onClick:function(){c(e.likesCount+1),k(0),y("liked")},children:[Object(r.createElement)("liked"===S?O.a:p.a),Object(g.jsx)("span",{className:"comment-action",children:o})]})},"comment-basic-like"),Object(g.jsx)(u.a,{title:"Dislike",children:Object(g.jsxs)("span",{onClick:function(){c(e.likesCount),k(1),y("disliked")},children:[l.a.createElement("disliked"===S?f.a:v.a),Object(g.jsx)("span",{className:"comment-action",children:b})]})},"comment-basic-dislike")];return Object(g.jsx)(j.a,{actions:N,author:A,avatar:Object(g.jsx)(d.a,{src:F||m.a,alt:"photo"}),content:Object(g.jsx)("p",{children:e.message}),datetime:Object(g.jsx)(u.a,{title:h()().format("YYYY-MM-DD HH:mm:ss"),children:Object(g.jsx)("span",{children:h()().fromNow()})})})},C=n(376),w=n(81),S=n(163),y=function(e){var t=Object(o.a)({initialValues:{post:""},onSubmit:function(t,n){var o=n.resetForm;e.addNewPost(t),o()}});return Object(g.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(g.jsx)(c.c,{name:"post",onBlur:t.handleBlur,onChange:t.handleChange,value:t.values.post,placeholder:"Enter your post"}),Object(g.jsx)("div",{children:Object(g.jsx)(w.a,{disabled:!t.dirty,htmlType:"submit",children:"Add post"})})]})},F=function(){var e=Object(x.c)(),t=Object(x.d)((function(e){return e.profilePage.profile})),n=Object(x.d)((function(e){return e.profilePage.posts})).map((function(e,t){return Object(g.jsx)(k,{message:e.message,likesCount:e.likesCount},t)}));return t?Object(g.jsxs)("div",{className:a.a.postsBlock,children:[Object(g.jsx)("h3",{children:"My posts"}),Object(g.jsx)("div",{children:Object(g.jsx)(y,{addNewPost:function(t){e(S.a.addPost(t.post))}})}),Object(g.jsx)("div",{className:a.a.posts,children:n})]}):Object(g.jsx)(C.a,{avatar:!0,active:!0,style:{position:"absolute",bottom:100}})},A=n(8),N=n.n(A),J=n(9),I=n(22),M=n(381),P=function(e){var t=e.contacts,n=e.onChange,o=e.errors.map((function(e){return e.split("->")[1].replace(")","").toLowerCase()}));return Object(g.jsx)("div",{children:Object.keys(t).map((function(e){return Object(g.jsx)(c.b,{title:e,isError:o.some((function(t){return t===e.toLowerCase()})),name:"contacts.".concat(e),onChange:n,value:t[e],placeholder:e},e)}))})},E=function(e){var t=e.profile,n=e.closeEditMode,i=e.authorizedUserId,a=e.errors,s=Object(x.c)(),r=function(e){return e.length?e:""},l=Object(o.a)({initialValues:{fullName:t.fullName,aboutMe:r(t.aboutMe),lookingForAJob:t.lookingForAJob,lookingForAJobDescription:r(t.lookingForAJobDescription),contacts:{facebook:r(t.contacts.facebook),github:r(t.contacts.github),instagram:r(t.contacts.instagram),mainLink:r(t.contacts.mainLink),twitter:r(t.contacts.twitter),vk:r(t.contacts.vk),website:r(t.contacts.website),youtube:r(t.contacts.youtube)}},onSubmit:function(){var e=Object(I.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=4;break}return e.next=3,s(Object(S.e)(Object(J.a)(Object(J.a)({},t),{},{userId:i})));case 3:n();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return Object(g.jsxs)("form",{onSubmit:l.handleSubmit,children:[Object(g.jsx)(c.a,{title:"\u0418\u043c\u044f",name:"fullName",onChange:l.handleChange,value:l.values.fullName,placeholder:"fullName"}),Object(g.jsx)(c.a,{title:"\u041e\u0431\u043e \u043c\u043d\u0435",name:"aboutMe",onChange:l.handleChange,value:l.values.aboutMe,placeholder:"aboutMe"}),Object(g.jsx)(M.a,{onChange:l.handleChange,checked:l.values.lookingForAJob,name:"lookingForAJob",children:"looking For A Job"}),l.values.lookingForAJob&&Object(g.jsx)(c.a,{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u044b",name:"lookingForAJobDescription",onChange:l.handleChange,value:l.values.lookingForAJobDescription,placeholder:"looking For A Job Description"}),Object(g.jsx)(P,{contacts:l.values.contacts,onChange:l.handleChange,errors:a}),Object(g.jsx)("div",{children:Object(g.jsx)(w.a,{htmlType:"submit",children:"Save"})}),!!a.length&&a.map((function(e,t){return Object(g.jsxs)("div",{style:{color:"red"},children:[Object(g.jsx)("strong",{children:"\u041e\u0448\u0438\u0431\u043a\u0430: "}),e]},t)}))]})},D=n(28),L=n(160),B=n(374),_=n(406),Y=n(405),U=n(391),W=n(410),z=n(416),H=n(400),T=n(35),V=n(161),K=n(415),q=function(e){var t=e.isOwner,n=void 0!==t&&t,o=e.status,c=e.updateStatus,i=void 0===c?function(e){return e}:c,a=Object(r.useState)(!1),l=Object(s.a)(a,2),u=l[0],j=l[1],d=Object(r.useState)(o),b=Object(s.a)(d,2),h=b[0],O=b[1],p=Object(x.c)();Object(r.useEffect)((function(){O(o)}),[o]);return Object(g.jsx)("div",{children:u?Object(g.jsxs)("div",{children:[Object(g.jsx)("strong",{children:"Status:"})," ",Object(g.jsx)(V.a,{onChange:function(e){O(e.target.value)},onBlur:function(){j(!1),p(i(h))},style:{maxWidth:400},autoFocus:!0,type:"text",value:h})]}):Object(g.jsxs)("div",{children:[Object(g.jsxs)("span",{children:[Object(g.jsx)("strong",{children:"Status:"})," ",o||"\u041d\u0435\u0442 \u0441\u0442\u0430\u0442\u0443\u0441\u0430"]}),n&&Object(g.jsx)(K.a,{style:{marginLeft:10},onClick:function(){n&&j(!0)}})]})})},G=function(e){var t=e.profile,n=e.isOwner,o=Object(x.d)((function(e){return e.profilePage.status})),c=Object.entries(null===t||void 0===t?void 0:t.contacts).map((function(e,t){var n=Object(s.a)(e,2),o=n[0],c=n[1];return c&&Object(g.jsx)("div",{children:Object(g.jsx)("a",{href:c,target:"_blank",style:{whiteSpace:"nowrap"},rel:"noreferrer",children:o})},t)}));return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(q,{isOwner:n,status:o,updateStatus:S.f}),Object(g.jsxs)(W.b,{bordered:!0,children:[Object(g.jsx)(W.b.Item,{style:{whiteSpace:"nowrap"},label:"Name",children:null===t||void 0===t?void 0:t.fullName}),(null===t||void 0===t?void 0:t.aboutMe)&&Object(g.jsx)(W.b.Item,{label:"About me",children:null===t||void 0===t?void 0:t.aboutMe}),(null===t||void 0===t?void 0:t.lookingForAJob)&&Object(g.jsx)(W.b.Item,{label:"Looking for a job description",children:null===t||void 0===t?void 0:t.lookingForAJobDescription}),c.some((function(e){return!!e}))&&Object(g.jsx)(W.b.Item,{label:"Contacts",children:c})]})]})},Q=function(){var e,t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],c=n[1],i=Object(x.c)(),a=Object(D.g)(),l=Object(D.i)(),u=Object(x.d)((function(e){return e.profilePage.profile})),j=Object(x.d)((function(e){return e.auth.userId})),d=Object(x.d)((function(e){return e.profilePage.errors}));Object(r.useEffect)((function(){var e,t=null!==(e=null===l||void 0===l?void 0:l.userId)&&void 0!==e?e:j;t?(i(Object(S.d)(t)),i(Object(S.c)(t))):a.push("/login")}),[j,i,a,l.userId]),Object(r.useEffect)((function(){d.length&&c(!0),d.forEach((function(e){L.b.error(e)}))}),[d]);return u?Object(g.jsxs)(B.a,{style:{maxWidth:"100%"},cover:Object(g.jsx)("div",{children:Object(g.jsx)(_.a,{style:{maxWidth:"300px"},src:(null===u||void 0===u||null===(e=u.photos)||void 0===e?void 0:e.large)||m.a})}),actions:[Object(g.jsx)("div",{children:!(null===l||void 0===l?void 0:l.userId)&&!o&&Object(g.jsx)(w.a,{onClick:function(){return c(!0)},children:"Edit profile"})})],children:[!(null===l||void 0===l?void 0:l.userId)&&o&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(H.a,{rotate:!0,children:Object(g.jsx)(Y.a,{withCredentials:!0,action:"https://social-network.samuraijs.com/api/1.0/profile/photo",onChange:function(e){var t,n,o,c;(null===(t=e.file.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.photos)&&(i(S.a.savePhotoSuccess(null===(o=e.file.response)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.photos)),L.b.success("New photo is uploaded"))},headers:{"API-KEY":T.c},showUploadList:!1,children:Object(g.jsx)(w.a,{icon:Object(g.jsx)(z.a,{}),children:"Upload new photo"})})}),Object(g.jsx)(U.a,{})]}),o?Object(g.jsx)(E,{errors:d,authorizedUserId:j,profile:u,closeEditMode:function(){c(!1)}}):Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(G,{profile:u,isOwner:!(null===l||void 0===l?void 0:l.userId)})})]}):Object(g.jsx)(C.a,{active:!0})};t.default=function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)(Q,{}),Object(g.jsx)(F,{})]})}}}]);
//# sourceMappingURL=5.3c8a0697.chunk.js.map