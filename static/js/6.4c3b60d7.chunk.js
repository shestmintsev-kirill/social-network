(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[6],{412:function(e,t,n){e.exports={postsBlock:"MyPosts_postsBlock__2ifKf",posts:"MyPosts_posts__3tZ1c"}},427:function(e,t,n){"use strict";n.r(t);var o=n(122),c=n(158),i=n(412),s=n.n(i),a=n(34),r=n(0),l=n(132),u=n(406),j=n(397),b=n(413),d=n.n(b),O=n(430),h=n(431),p=n(432),v=n(433),f=n(31),x=n(121),m=n(7),g=function(e){var t=Object(r.useState)(e.likesCount),n=Object(a.a)(t,2),o=n[0],c=n[1],i=Object(r.useState)(0),s=Object(a.a)(i,2),b=s[0],g=s[1],k=Object(r.useState)(""),C=Object(a.a)(k,2),w=C[0],y=C[1],S=Object(f.c)((function(e){var t,n;return null===(t=e.profilePage.profile)||void 0===t||null===(n=t.photos)||void 0===n?void 0:n.large})),F=Object(f.c)((function(e){var t;return null===(t=e.profilePage.profile)||void 0===t?void 0:t.fullName})),A=[Object(m.jsx)(l.a,{title:"Like",children:Object(m.jsxs)("span",{onClick:function(){c((function(e){return e+1})),g(0),y("liked")},children:["liked"===w?Object(m.jsx)(O.a,{}):Object(m.jsx)(h.a,{}),Object(m.jsx)("span",{className:"comment-action",children:o})]})},"comment-basic-like"),Object(m.jsx)(l.a,{title:"Dislike",children:Object(m.jsxs)("span",{onClick:function(){c(e.likesCount),g(1),y("disliked")},children:["disliked"===w?Object(m.jsx)(p.a,{}):Object(m.jsx)(v.a,{}),Object(m.jsx)("span",{className:"comment-action",children:b})]})},"comment-basic-dislike")];return Object(m.jsx)(u.a,{actions:A,author:F,avatar:Object(m.jsx)(j.a,{src:S||x.a,alt:"photo"}),content:Object(m.jsx)("p",{children:e.message}),datetime:Object(m.jsx)(l.a,{title:d()().format("YYYY-MM-DD HH:mm:ss"),children:Object(m.jsx)("span",{children:d()().fromNow()})})})},k=n(395),C=n(157),w=n(90),y=n(178),S=function(){var e=Object(f.b)(),t=Object(o.a)({initialValues:{post:""},onSubmit:function(t,n){var o=n.resetForm;e(y.a.addPost(t.post)),o(),C.b.success("New post added")}});return Object(m.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(m.jsx)(c.c,{name:"post",onBlur:t.handleBlur,onChange:t.handleChange,value:t.values.post,placeholder:"Enter your post"}),Object(m.jsx)("div",{children:Object(m.jsx)(w.a,{disabled:!t.dirty,htmlType:"submit",children:"Add post"})})]})},F=function(){var e=Object(f.c)((function(e){return e.profilePage.profile})),t=Object(f.c)((function(e){return e.profilePage.posts})).map((function(e,t){return Object(m.jsx)(g,{message:e.message,likesCount:e.likesCount},t)}));return e?Object(m.jsxs)("div",{className:s.a.postsBlock,children:[Object(m.jsx)("h3",{children:"My posts"}),Object(m.jsx)("div",{children:Object(m.jsx)(S,{})}),Object(m.jsx)("div",{className:s.a.posts,children:t})]}):Object(m.jsx)(k.a,{avatar:!0,active:!0,style:{position:"absolute",bottom:100}})},A=n(9),I=n.n(A),J=n(10),N=n(20),M=n(400),P=function(e){var t=e.contacts,n=e.onChange,o=e.errors.map((function(e){var t;return null===(t=e.split("->")[1])||void 0===t?void 0:t.replace(")","").toLowerCase()}));return Object(m.jsx)("div",{children:Object.keys(t).map((function(e){return Object(m.jsx)(c.b,{title:e,isError:o.some((function(t){return t===e.toLowerCase()})),name:"contacts.".concat(e),onChange:n,value:t[e],placeholder:e},e)}))})},E=function(e){var t=e.closeEditMode,n=e.profile,i=e.authorizedUserId,s=e.errors,a=Object(f.b)(),r=Object(o.a)({initialValues:{fullName:n.fullName,aboutMe:n.aboutMe,lookingForAJob:n.lookingForAJob,lookingForAJobDescription:n.lookingForAJobDescription,contacts:{facebook:n.contacts.facebook,github:n.contacts.github,instagram:n.contacts.instagram,mainLink:n.contacts.mainLink,twitter:n.contacts.twitter,vk:n.contacts.vk,website:n.contacts.website,youtube:n.contacts.youtube}},onSubmit:function(){var e=Object(N.a)(I.a.mark((function e(n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=4;break}return e.next=3,a(Object(y.e)(Object(J.a)(Object(J.a)({},n),{},{userId:i})));case 3:t();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return Object(m.jsxs)("form",{onSubmit:r.handleSubmit,children:[Object(m.jsx)(c.a,{title:"\u0418\u043c\u044f",name:"fullName",onChange:r.handleChange,value:r.values.fullName,placeholder:"fullName"}),Object(m.jsx)(c.a,{title:"\u041e\u0431\u043e \u043c\u043d\u0435",name:"aboutMe",onChange:r.handleChange,value:r.values.aboutMe,placeholder:"aboutMe"}),Object(m.jsx)(M.a,{onChange:r.handleChange,checked:r.values.lookingForAJob,name:"lookingForAJob",children:"looking For A Job"}),r.values.lookingForAJob&&Object(m.jsx)(c.a,{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u044b",name:"lookingForAJobDescription",onChange:r.handleChange,value:r.values.lookingForAJobDescription,placeholder:"looking For A Job Description"}),Object(m.jsx)(P,{contacts:r.values.contacts,onChange:r.handleChange,errors:s}),Object(m.jsx)("div",{children:Object(m.jsx)(w.a,{disabled:!r.isValid,htmlType:"submit",children:"Save"})}),!!s.length&&s.map((function(e,t){return Object(m.jsxs)("div",{style:{color:"red"},children:[Object(m.jsx)("strong",{children:"\u041e\u0448\u0438\u0431\u043a\u0430: "}),e]},t)}))]})},D=n(37),L=n(393),_=n(426),B=n(425),Y=n(411),U=n(429),V=n(435),W=n(419),z=n(44),H=n(176),K=n(434),T=function(e){var t=e.isOwner,n=void 0!==t&&t,o=e.status,c=e.updateStatus,i=void 0===c?function(e){return e}:c,s=Object(r.useState)(!1),u=Object(a.a)(s,2),j=u[0],b=u[1],d=Object(f.b)(),O=function(e){var t=Object(r.useState)(e),n=Object(a.a)(t,2),o=n[0],c=n[1];return{value:o,onChange:function(e){c(e.target.value)}}}(o);return Object(m.jsx)("div",{children:j?Object(m.jsxs)("div",{children:[Object(m.jsx)("strong",{children:"Status:"})," ",Object(m.jsx)(H.a,Object(J.a)(Object(J.a)({},O),{},{onBlur:function(){b(!1),d(i(O.value))},style:{maxWidth:400},autoFocus:!0,type:"text"}))]}):Object(m.jsxs)("div",{children:[Object(m.jsxs)("span",{children:[Object(m.jsx)("strong",{children:"Status:"})," ",o||"\u041d\u0435\u0442 \u0441\u0442\u0430\u0442\u0443\u0441\u0430"]}),n&&Object(m.jsx)(l.a,{placement:"right",title:"Edit status",children:Object(m.jsx)(K.a,{style:{marginLeft:10},onClick:function(){n&&b(!0)}})})]})})},Z=function(e){var t=e.profile,n=e.isOwner,o=Object(f.c)((function(e){return e.profilePage.status})),c=Object.entries(null===t||void 0===t?void 0:t.contacts).map((function(e,t){var n=Object(a.a)(e,2),o=n[0],c=n[1];return c&&Object(m.jsx)("div",{children:Object(m.jsx)("a",{href:c,target:"_blank",style:{whiteSpace:"nowrap"},rel:"noreferrer",children:o})},t)}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(T,{isOwner:n,status:o,updateStatus:y.f}),Object(m.jsxs)(U.b,{bordered:!0,children:[Object(m.jsx)(U.b.Item,{style:{whiteSpace:"nowrap"},label:"Name",children:null===t||void 0===t?void 0:t.fullName}),(null===t||void 0===t?void 0:t.aboutMe)&&Object(m.jsx)(U.b.Item,{label:"About me",children:null===t||void 0===t?void 0:t.aboutMe}),(null===t||void 0===t?void 0:t.lookingForAJob)&&Object(m.jsx)(U.b.Item,{label:"Looking for a job description",children:null===t||void 0===t?void 0:t.lookingForAJobDescription}),c.some((function(e){return!!e}))&&Object(m.jsx)(U.b.Item,{label:"Contacts",children:c})]})]})},q=function(){var e,t=Object(r.useState)(!1),n=Object(a.a)(t,2),o=n[0],c=n[1],i=Object(f.b)(),s=Object(D.g)(),l=Object(D.i)(),u=Object(f.c)((function(e){return e.profilePage.profile})),j=Object(f.c)((function(e){return e.auth.userId})),b=Object(f.c)((function(e){return e.profilePage.errors}));Object(r.useEffect)((function(){var e,t=null!==(e=null===l||void 0===l?void 0:l.userId)&&void 0!==e?e:j;t?(i(Object(y.d)(t)),i(Object(y.c)(t))):s.push("/login")}),[j,i,s,l.userId]),Object(r.useEffect)((function(){b.length&&c(!0),b.forEach((function(e){C.b.error(e)}))}),[b]);return u?Object(m.jsxs)(L.a,{style:{maxWidth:"100%"},cover:Object(m.jsx)("div",{children:Object(m.jsx)(_.a,{style:{maxWidth:"300px"},src:(null===u||void 0===u||null===(e=u.photos)||void 0===e?void 0:e.large)||x.a})}),actions:[Object(m.jsx)("div",{children:!(null===l||void 0===l?void 0:l.userId)&&!o&&Object(m.jsx)(w.a,{onClick:function(){return c(!0)},children:"Edit profile"})},null===l||void 0===l?void 0:l.userId)],children:[!(null===l||void 0===l?void 0:l.userId)&&o&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(W.a,{rotate:!0,children:Object(m.jsx)(B.a,{withCredentials:!0,action:"https://social-network.samuraijs.com/api/1.0/profile/photo",onChange:function(e){var t,n,o,c;(null===(t=e.file.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.photos)&&(i(y.a.savePhotoSuccess(null===(o=e.file.response)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.photos)),C.b.success("New photo is uploaded"))},headers:{"API-KEY":z.c},showUploadList:!1,children:Object(m.jsx)(w.a,{icon:Object(m.jsx)(V.a,{}),children:"Upload new photo"})})}),Object(m.jsx)(Y.a,{})]}),o?Object(m.jsx)(E,{errors:b,authorizedUserId:j,profile:u,closeEditMode:function(){c(!1)}}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(Z,{profile:u,isOwner:!(null===l||void 0===l?void 0:l.userId)})})]}):Object(m.jsx)(k.a,{active:!0})};t.default=function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(q,{}),Object(m.jsx)(F,{})]})}}}]);
//# sourceMappingURL=6.4c3b60d7.chunk.js.map